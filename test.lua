-- title:  game title
-- author: game developer
-- desc:   short description
-- script: lua

x=96
y=24
vx=0
vy=0
index=256
starsCount=200
stars={}

for i=1,starsCount do
	stars[i]={
		id=math.random(1,2),
		x=math.random(0,239),
		y=math.random(0,135)	
	}
end

function drawMap()	
	for i=1,#stars do
		spr(stars[i].id,stars[i].x,stars[i].y,0)
	end
			
	map(0,0,30,17,0,0,0) 
end

function updatePlayer()
	updateVelocity()
	updateSprite()
end

function updateVelocity()
	vy=0
	vx=0
	
	if btn(0) then vy=-1 end
	if btn(1) then	vy=1 end
	if btn(2) then	vx=-1 end
	if btn(3) then	vx=1 end
	
	y=y+vy
	x=x+vx
end

function updateSprite()
	if vy<0 then index=256 end
	if vy>0 then index=258 end
	if vx<0 then index=259 end
	if vx>0 then index=257 end
	if vy<0 and vx<0 then index=260 end
	if vy>0 and vx>0 then index=262 end
	if vy<0 and vx>0 then index=261 end
	if vy>0 and vx<0 then index=263 end
end

function TIC()

	cls(0)
	drawMap()
	updatePlayer()
	
	local isMoving= vx~=0 or vy~=0
	
	spr(index+(isMoving and 16 or 0),x,y,0,3,0,0,1,1)
end

-- <TILES>
-- 001:0000000000000000000c000000ccc000000c0000000000000000000000000000
-- 002:000000000000000000c0c000000c000000c0c000000000000000000000000000
-- 004:0000022200022222002223330223333302233444223344442234444422344444
-- 005:2220000022222000333222003333322044433220444433224444432244444322
-- 020:2234444422344444223344440223344402233333002223330002222200000222
-- 021:4444432244444322444433224443322033333220333222002222200022200000
-- 067:0000000000000000000000000000000000000000000000000000aaaa000a0000
-- 068:00000eee000eeeee00eeebbb0eebbbbb0eebbbbbeebbbbbbeebbbbbbeebbbbbb
-- 069:eee00000eeeee000bbbeee00bbbbbee0bbbbbee0ffbbbbeeffbbbbeebbbbbbee
-- 070:000000000000000000000000000000000000000000000000aaaaa0000000a000
-- 083:00a0000000aa0000000aa0000000aaaa00000000000000000000000000000000
-- 084:eebbbbbbeebbbbbbeebbbbbbaaaaaaaa0eebbbbb00eeebbb000eeeee00000eee
-- 085:bbbbbbeebbbbbbeebbbbbbeeaaaaaaaabbbbbee0bbbeee00eeeee000eee00000
-- 086:00000a0000000a000000a000aaaaa00000000000000000000000000000000000
-- </TILES>

-- <SPRITES>
-- 000:0006600000066000006666000666666006000060000000000000000000000000
-- 001:0000000000066000000066000000666600006666000066000006600000000000
-- 002:0000000000000000000000000600006006666660006666000006600000066000
-- 003:0000000000066000006600006666000066660000006600000006600000000000
-- 004:6600000066666600066666600660060006600000066600000060000000000000
-- 005:0000006600666666066666600060066000000660000066600000060000000000
-- 006:0000000000000600000066600000066000600660066666600066666600000066
-- 007:0000000000600000066600000660000006600600066666606666660066000000
-- 016:0006600000066000006666000666666006000060404004040400004000000000
-- 017:0040000004066000004066000000666600006666004066000406600000400000
-- 018:0000000004000040404004040600006006666660006666000006600000066000
-- 019:0000040000066040006604006666000066660000006604000006604000000400
-- 020:6600000066666600066666600660060406600044066600000060400000044000
-- 021:0000006600666666066666604060066044000660000066600004060000044000
-- 022:0004400000040600000066604400066040600660066666600066666600000066
-- 023:0004400000604000066600000660004406600604066666606666660066000000
-- </SPRITES>

-- <MAP>
-- 001:000000000000000000000000000000000040500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:000000000000000000000000000000000041510000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:000000000000000000003444546400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:000000000000000000003545556500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PATTERNS>
-- 000:800004800004800004800004800004800004800004800004100000d00004d00004d00004d00004d00004d00004100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:80000a80000af0000840000650000a50000a400008f00006d00006d00008400006800008800006f0000440000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:700006800006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </PATTERNS>

-- <TRACKS>
-- 000:180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000330
-- </TRACKS>

-- <PALETTE>
-- 000:0004005d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE>

